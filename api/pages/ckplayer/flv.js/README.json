{"title":"","uid":"1cd19fc71517798e2fa5b7457d1fb06e","text":"flv.js An HTML5 Flash Video (FLV) Player written in pure JavaScript without Flash. LONG LIVE FLV! This project relies on Media Source Extens...","date":"2023-01-16T02:00:17.085Z","updated":"2022-10-11T00:46:49.000Z","comments":true,"path":"api/pages/ckplayer/flv.js/README.json","covers":[],"excerpt":"","content":"<h1 id=\"flv-js\"><a href=\"#flv-js\" class=\"headerlink\" title=\"flv.js  \"></a>flv.js  <a href=\"https://www.npmjs.com/package/flv.js\"><img src=\"https://img.shields.io/npm/v/flv.js.svg?style=flat\" alt=\"npm\"></a></h1><p>An HTML5 Flash Video (FLV) Player written in pure JavaScript without Flash. LONG LIVE FLV!</p>\n<p>This project relies on <a href=\"https://w3c.github.io/media-source/\">Media Source Extensions</a> to work.</p>\n<p><strong>For FLV live stream playback, please consider <a href=\"https://github.com/xqq/mpegts.js\">mpegts.js</a> which is under active development.</strong></p>\n<p><strong>This project will become rarely maintained.</strong></p>\n<h2 id=\"Overview\"><a href=\"#Overview\" class=\"headerlink\" title=\"Overview\"></a>Overview</h2><p>flv.js works by transmuxing FLV file stream into ISO BMFF (Fragmented MP4) segments, followed by feeding mp4 segments into an HTML5 <code>&lt;video&gt;</code> element through <a href=\"https://w3c.github.io/media-source/\">Media Source Extensions</a> API.</p>\n<h2 id=\"Demo\"><a href=\"#Demo\" class=\"headerlink\" title=\"Demo\"></a>Demo</h2><p><a href=\"http://bilibili.github.io/flv.js/demo/\">http://bilibili.github.io/flv.js/demo/</a></p>\n<h2 id=\"Features\"><a href=\"#Features\" class=\"headerlink\" title=\"Features\"></a>Features</h2><ul>\n<li>FLV container with H.264 + AAC &#x2F; MP3 codec playback</li>\n<li>Multipart segmented video playback</li>\n<li>HTTP FLV low latency live stream playback</li>\n<li>FLV over WebSocket live stream playback</li>\n<li>Compatible with Chrome, FireFox, Safari 10, IE11 and Edge</li>\n<li>Extremely low overhead, and hardware accelerated by your browser!</li>\n</ul>\n<h2 id=\"Installation\"><a href=\"#Installation\" class=\"headerlink\" title=\"Installation\"></a>Installation</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">--save</span> flv.js<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"Build\"><a href=\"#Build\" class=\"headerlink\" title=\"Build\"></a>Build</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> ci                 <span class=\"token comment\"># install dependencies / dev-dependences</span>\n<span class=\"token function\">npm</span> run build:debug    <span class=\"token comment\"># debug version flv.js will be emitted to /dist</span>\n<span class=\"token function\">npm</span> run build          <span class=\"token comment\"># minimized release version flv.min.js will be emitted to /dist</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p><a href=\"https://github.com/cnpm/cnpm\">cnpm</a> mirror is recommended if you are in Mainland China.</p>\n<h2 id=\"CORS\"><a href=\"#CORS\" class=\"headerlink\" title=\"CORS\"></a>CORS</h2><p>If you use standalone video server for FLV stream, <code>Access-Control-Allow-Origin</code> header must be configured correctly on video server for cross-origin resource fetching.</p>\n<p>See <a href=\"docs/cors.md\">cors.md</a> for more details.</p>\n<h2 id=\"Getting-Started\"><a href=\"#Getting-Started\" class=\"headerlink\" title=\"Getting Started\"></a>Getting Started</h2><pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>flv.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>video</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>videoElement<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>video</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>flvjs<span class=\"token punctuation\">.</span><span class=\"token function\">isSupported</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">var</span> videoElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'videoElement'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">var</span> flvPlayer <span class=\"token operator\">=</span> flvjs<span class=\"token punctuation\">.</span><span class=\"token function\">createPlayer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n            <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'flv'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token string\">'http://example.com/flv/video.flv'</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        flvPlayer<span class=\"token punctuation\">.</span><span class=\"token function\">attachMediaElement</span><span class=\"token punctuation\">(</span>videoElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        flvPlayer<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        flvPlayer<span class=\"token punctuation\">.</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"Limitations\"><a href=\"#Limitations\" class=\"headerlink\" title=\"Limitations\"></a>Limitations</h2><ul>\n<li>MP3 audio codec is currently not working on IE11 &#x2F; Edge</li>\n<li>HTTP FLV live stream is not currently working on all browsers, see <a href=\"docs/livestream.md\">livestream.md</a></li>\n</ul>\n<h2 id=\"Multipart-playback\"><a href=\"#Multipart-playback\" class=\"headerlink\" title=\"Multipart playback\"></a>Multipart playback</h2><p>You only have to provide a playlist for <code>MediaDataSource</code>. See <a href=\"docs/multipart.md\">multipart.md</a></p>\n<h2 id=\"Livestream-playback\"><a href=\"#Livestream-playback\" class=\"headerlink\" title=\"Livestream playback\"></a>Livestream playback</h2><p>See <a href=\"docs/livestream.md\">livestream.md</a></p>\n<h2 id=\"API-and-Configuration\"><a href=\"#API-and-Configuration\" class=\"headerlink\" title=\"API and Configuration\"></a>API and Configuration</h2><p>See <a href=\"docs/api.md\">api.md</a></p>\n<h2 id=\"Debug\"><a href=\"#Debug\" class=\"headerlink\" title=\"Debug\"></a>Debug</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> ci         <span class=\"token comment\"># install dependencies / dev-dependences</span>\n<span class=\"token function\">npm</span> run dev    <span class=\"token comment\"># watch file changes and build debug version on the fly</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<h2 id=\"Design\"><a href=\"#Design\" class=\"headerlink\" title=\"Design\"></a>Design</h2><p>See <a href=\"docs/design.md\">design.md</a></p>\n<h2 id=\"License\"><a href=\"#License\" class=\"headerlink\" title=\"License\"></a>License</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">Copyright (C) 2016 Bilibili. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the &quot;License&quot;);\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http:&#x2F;&#x2F;www.apache.org&#x2F;licenses&#x2F;LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an &quot;AS IS&quot; BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n","count_time":{"symbolsCount":"2.9k","symbolsTime":"3 mins."},"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#flv-js\"><span class=\"toc-text\">flv.js  </span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Overview\"><span class=\"toc-text\">Overview</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Demo\"><span class=\"toc-text\">Demo</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Features\"><span class=\"toc-text\">Features</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Installation\"><span class=\"toc-text\">Installation</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Build\"><span class=\"toc-text\">Build</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#CORS\"><span class=\"toc-text\">CORS</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Getting-Started\"><span class=\"toc-text\">Getting Started</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Limitations\"><span class=\"toc-text\">Limitations</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Multipart-playback\"><span class=\"toc-text\">Multipart playback</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Livestream-playback\"><span class=\"toc-text\">Livestream playback</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#API-and-Configuration\"><span class=\"toc-text\">API and Configuration</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Debug\"><span class=\"toc-text\">Debug</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Design\"><span class=\"toc-text\">Design</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#License\"><span class=\"toc-text\">License</span></a></li></ol></li></ol>"}